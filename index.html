<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://rawgit.com/gausian-developers/asa-client-js/master/asa-client.js"></script>
  <meta charset="utf-8">
  <title>APP Template 1</title>
</head>
<body>

  <h2>ASA client JS - Example 1</h2>

  <h4>Purpose:</h4>
  This is your first ASA request. <br/>
  
  It requests at most 2 customer items with customer_id smaller than 4 from service app 
  <a href="http://tianjiasun.github.io/ASA_website/get_started.html" target="_blank">'CustomerDataReadWrite'</a> 
  via ASA. <br/>
  
  This page calls <a href="https://github.com/gausian-developers/asa-client-js" target="_blank">'asa-client.js'</a>
  to supports your request to <a href="http://tianjiasun.github.io/ASA_website/index.html" target="_blank">asa.gausian.com</a><br/>

  This page finally displays 'customer.customer_id' and 'customer.company_name' in <b>Results</b>.

  <h4>ASA Code:</h4>
  ASA.request('GET:customer_id,company_name;ON:customer_id<[4];LIMIT:2;@CustomerDataReadWrite', callback);

  <h4>Results:</h4>
  <ul id="customer_list">

  </ul>
  <h4>Notes:</h4>
  Find all examples at <a href="https://github.com/gausian-developers" target="_blank">https://github.com/gausian-developers</a> <br/>
  All data used in development stage are dummy.

  <script type="text/javascript">

  var customer_array = [];

  ASA.init('CustomerDataReadWrite', '0000000x0');
  ASA.request('GET:customer_id,company_name;ON:customer_id<[4];LIMIT:2;@CustomerDataReadWrite', function (data, error) {
    if (error) {
      console.error('Opps! We have a glitch with ASA server connection' + error);
    }
    if (data.response_code === 1) { // success
      customer_array = JSON.parse(data.response);
      customer_array.forEach(function (customer) {
        var node = $('<li>'+ customer.customer_id + ', ' + customer.company_name + '</li>');
        $('#customer_list').append(node);
      });
    } else {
      console.error('ASA Error[' + data.response_code + ']:' + data.response);
    }
  });
  </script>

</body>
</html>
